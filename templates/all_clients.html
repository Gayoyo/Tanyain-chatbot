{% extends "base_superadmin.html" %}

{% block content %}
<h1 class="text-2xl font-bold mb-6">👥 Daftar Semua Klien</h1>

<table class="w-full table-auto text-sm bg-white shadow-md rounded-lg overflow-hidden border border-gray-200">
  <thead class="bg-gray-100 text-gray-700">
    <tr>
      <th class="p-3 text-left">Nama</th>
      <th class="p-3 text-left">Email</th>
      <th class="p-3 text-left">Slug</th>
      <th class="p-3 text-left">Status</th>
      <th class="p-3 text-left">Aksi</th>
    </tr>
  </thead>
  <tbody>
    {% for client in clients %}
    <tr class="border-t hover:bg-gray-50 transition">
      <td class="p-3">{{ client.business_name }}</td>
      <td class="p-3">{{ client.username }}</td>
      <td class="p-3 text-purple-600 font-mono">{{ client.slug }}</td>
      <td class="p-3">{% if client.is_approved %}<span class="text-green-600">✅ Disetujui</span>{% else %}<span class="text-yellow-600">⏳ Pending</span>{% endif %}</td>
      <td class="p-3">
        {% if not client.is_approved %}
        <a href="{{ url_for('approve_client', client_id=client.id) }}"
           class="inline-block px-3 py-1 bg-green-500 hover:bg-green-600 text-white text-xs rounded shadow">
          ✅ Approve
        </a>
        {% else %}
        <span class="text-sm text-gray-400">✔ Sudah Approve</span>
        {% endif %}
      </td>
    </tr>
    <tr class="bg-gray-50 border-b">
      <td colspan="5" class="p-3 pl-6 text-sm text-gray-700">
        <span class="font-semibold">🔗 Link:</span>
        <a href="/chat/{{ client.slug }}" target="_blank" class="text-blue-600 underline hover:text-blue-800 ml-2">Chatbot</a>
        |
        <a href="/qr/{{ client.slug }}" target="_blank" class="text-pink-600 underline hover:text-pink-800 ml-2">QR Code</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
